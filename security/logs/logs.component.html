<ng-template #title>
  <nz-space>
    <ng-container *ngIf="lists.hasSearch('username')">
      <nz-input-group *nzSpaceItem nzSearch [nzAddOnAfter]="nzAddOnAfter" style="width: 240px">
        <input
          nz-input
          [bitSearchStart]="lists"
          [placeholder]="bit.l['search']"
          [(ngModel)]="lists.search['username'].value"
          (after)="getLists(true)"
        />
        <ng-template #nzAddOnAfter>
          <button
            nz-button
            nzType="primary"
            nzSearch
            [bitSearchStart]="lists"
            (after)="getLists(true)"
          >
            <i nz-icon nzType="search"></i>
          </button>
        </ng-template>
      </nz-input-group>
    </ng-container>
    <ng-container *ngIf="lists.hasSearch('time')">
      <nz-range-picker
        *nzSpaceItem
        nzFormat="yyyy-MM-dd HH:mm:ss"
        [bitSearchChange]="lists"
        [nzShowTime]="{ nzFormat: 'HH:mm:ss' }"
        [nzPlaceHolder]="[bit.l['startTime'], bit.l['endTime']]"
        [(ngModel)]="lists.search['time'].value"
        (after)="getLists(true)"
      >
      </nz-range-picker>
    </ng-container>
    <button *nzSpaceItem nz-button nzType="default" (click)="getLists(true)">
      <i nz-icon nzType="sync"></i> {{ bit.l["refreshLists"] }}
    </button>
    <button
      *nzSpaceItem
      nz-button
      nzType="default"
      [bitSearchClear]="lists"
      (after)="getLists(true)"
    >
      <i nz-icon nzType="clear"></i> {{ bit.l["clearSearch"] }}
    </button>
  </nz-space>
</ng-template>

<nz-card [nzTitle]="title">
  <nz-table
    #table
    [nzData]="lists.data"
    [nzLoading]="lists.loading"
    [nzTotal]="lists.totals"
    [nzPageSize]="lists.limit"
    [nzFrontPagination]="false"
    [(nzPageIndex)]="lists.index"
    (nzPageIndexChange)="getLists(false, $event)"
    nzSize="middle"
  >
    <thead>
    <tr>
      <th nzWidth="160px">{{ bit.l["user"] }}</th>
      <th>{{ bit.l["content"] }}</th>
      <th nzWidth="160px" nzRight>{{ bit.l["time"] }}</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let data of table.data">
      <td>{{ data.username }}</td>
      <td>
        {{ data.content }}
      </td>
      <td>{{ data.time * 1000 | date: "yyyy-MM-dd HH:mm:ss" }}</td>
    </tr>
    </tbody>
  </nz-table>
</nz-card>
